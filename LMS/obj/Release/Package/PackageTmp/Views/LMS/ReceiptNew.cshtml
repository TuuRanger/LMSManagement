@model List<LMS.Models.ReceiptList>
@{
    ViewBag.Title = "Job Order Info";
}

<section class="content-header">
    <h1>
        Receipt Management
    </h1>
    <ol class="breadcrumb">
        <li><a href="#"><i class="fa fa-dashboard"></i> Forms</a></li>
        <li class="active">Receipt</li>
    </ol>
</section>

    @foreach (var item in Model)
    {
    string SType = "";



    foreach (var IInvoice in item.LInvoice)
    {
        <section class="content">
            <form action="/LMS/ReceiptCommit" method="post" onsubmit="return chk_form()">
                @{
        DateTime nDate = DateTime.Now;
        DateTime dDate = DateTime.Now;
      
                }
                <div class="row">


                    <div class="col-md-12">
                        <div class="box box-success">
                            <div class="box-header with-border">
                                <h3 class="box-title">Receipt</h3>
                                <div class="box-tools pull-right">
                                    <button type="button" class="btn btn-box-tool" data-widget="collapse">
                                        <i class="fa fa-minus"></i>
                                    </button>
                                    @*   <button type="button" class="btn btn-box-tool" data-widget="remove"><i class="fa fa-times"></i></button>*@
                                </div>
                            </div>
                            <div class="box-body">

                                <!-- text input -->

                                <div class="form-group">
                                    <div class="col-md-6">
                                        <label>Receipt No</label>
                                        <input type="text" id="ReceiptNo" name="ReceiptNo" class="form-control" placeholder="xxxxxxxx" disabled>

                                    </div>

                                    <div class="col-md-6">
                                        <label>Invoice No</label>
                                        <input type="text" id="InvoiceNo" name="InvoiceNo" class="form-control" value="@IInvoice.InvoiceNo" placeholder="xxxxxxxx" readonly>

                                    </div>

                                </div>
                                &nbsp;
                                <div class="form-group">
                                    <div class="col-md-12">
                                        <label>Sub Agent</label>
                                        <input type="text" id="SubName" name="SubName" class="form-control" value="@IInvoice.SubName" readonly>

                                    </div>
                                </div>

                                &nbsp;
                                <div class="form-group">
                                    <div class="col-md-6">
                                        <label>Receipt Date</label>
                                        <div class="input-group date">
                                            <input type="text" class="form-control" name="ReceiptDate" id="ReceiptDate" data-select="datepicker"
                                                   data-val="true" data-val-required="Date is required" value="@nDate.ToString("dd/MM/yyyy")">
                                            <span class="input-group-btn">
                                                <button type="button" class="btn btn-success" data-toggle="datepicker">
                                                    <i class="fa fa-calendar"></i>
                                                </button>
                                            </span>

                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <label>Payment Date</label>
                                        <div class="input-group date">
                                            <input type="text" class="form-control" name="PaymentDate" id="PaymentDate" data-select="datepicker"
                                                   data-val="true" data-val-required="Date is required" value="@nDate.ToString("dd/MM/yyyy")">
                                            <span class="input-group-btn">
                                                <button type="button" class="btn btn-success" data-toggle="datepicker">
                                                    <i class="fa fa-calendar"></i>
                                                </button>
                                            </span>

                                        </div>
                                    </div>
                                </div>
                                &nbsp;
                                <div class="form-group">
                                    <div class="col-md-6">
                                        <label>Grand Total</label>
                                        <input type="text" id="GrandTotal" name="GrandTotal" class="form-control" value="@IInvoice.GrandTotal.ToString("#,###.##")" readonly>

                                    </div>
                                    <div class="col-md-6">
                                        <label>Payment Type</label>
                                        <select class="form-control" id="PaymentType" name="PaymentType">

                                            @* <option value="">-- Select No of vechile --</option>*@
                                            <option value="1">Cash</option>
                                            <option value="2">PayPal</option>
                                            <option value="3">Credit</option>
                                            <option value="4">Cheque</option>
                                            <option value="5">Transfer</option>
                                        </select>
                                    </div>
                                </div>
                                &nbsp;
                                <div class="form-group">
                                    <div class="col-md-12">
                                        <div class="box-footer clearfix">
                                           
                                            <button type="submit" class="btn btn-success btn-block" data-animation-type="bounce" data-animation-duration="1" style="animation-duration: 1s; visibility: visible;">Save</button>
                                        </div>
                                    </div>
                                </div>

                            </div>
                            <!-- /.box-body -->
                        </div>
                    </div>


                </div>
            </form>
        </section>
    <section class="content">
        <!-- title row -->
        <div class="row">

            <div class="col-md-12">
                <div class="box box-success">
                    <div class="box-header with-border">
                        <h3 class="box-title">Invoice</h3>
                        <div class="box-tools pull-right">
                            <button type="button" class="btn btn-box-tool" data-widget="collapse">
                                <i class="fa fa-minus"></i>
                            </button>
                            @*   <button type="button" class="btn btn-box-tool" data-widget="remove"><i class="fa fa-times"></i></button>*@
                        </div>
                    </div>
                    <div class="box-body">
                        <div class="row">
                            <div class="col-xs-12">
                                <table width="100%">
                                    <tr>
                                        <td width="70%">
                                            <img src="~/img/SYN-Logo-th-ol.jpg" width="15%"><b>บริษัท เซนเนอร์ยี่ 2016 จำกัด</b>
                                            <br />
                                            60/29 หมู่ 6 ถ.กิ่งแก้ว ต.ราชาเทวะ อ.บางพลี จ.สมุทรปราการ 10540
                                            <br />
                                            เลขประจำตัวผู้เสียภาษี 0105543092392 สำนักงานใหญ่
                                        </td>
                                        <td width="30%" align="right">
                                            <b>วันที่ / Date :</b> &nbsp; @IInvoice.InvoiceDate.ToString("dd/MM/yyyy")
                                            <br />
                                            <b>เลขที่ / No : </b> &nbsp; IV &nbsp; @IInvoice.InvoiceNo
                                            <br />
                                        </td>
                                    </tr>
                                </table>
                                <hr />
                                <table width="100%">
                                    <tr>
                                        <td width="100%" align="center" style="background-color:#b4adad">
                                            <h4>ใบแจ้งหนี้ / Invoice</h4>
                                        </td>

                                    </tr>

                                    <tr>
                                        <td width="100%" valign="top">
                                            <br />
                                            <b>Customer Name :</b>&nbsp; @IInvoice.SubName
                                            <br />
                                            <b>Address :</b>&nbsp; @IInvoice.SubAddress
                                            <br />
                                            <b>Telephone :</b>&nbsp; @IInvoice.SubTel
                                            <br />
                                            <b>เลขประจำตัวผู้เสียภาษี :</b>&nbsp; @IInvoice.SubTax
                                            <br />
                                            <b>เงื่อนไขการชำระเงิน :</b>&nbsp;Credit Term &nbsp; @IInvoice.CreditTerm
                                            <br />
                                            <b>กำหนดชำระเงิน :</b>&nbsp; @IInvoice.DueDate.ToString("dd/MM/yyyy")
                                        </td>

                                    </tr>

                                </table>

                                <hr />
                                <table width="100%">
                                    <tr>
                                        <td width="10%">
                                            <b>Booking ID</b>
                                        </td>
                                        <td width="10%">
                                            <b>Date of Service</b>
                                        </td>
                                        <td width="10%">
                                            <b>Service</b>
                                        </td>
                                        <td width="40%">
                                            <b>Detail</b>
                                        </td>
                                        <td width="20%">
                                            <b>Passenger</b>
                                        </td>
                                        <td width="10%">
                                            <b>Amount</b>
                                        </td>

                                    </tr>
                                    @foreach (var IBooking in item.LBooking)
                                    {
                                        if (@IBooking.ServiceType == 1)
                                        {
                                            SType = "One Way";
                                        }
                                        else if (@IBooking.ServiceType == 2)
                                        {
                                            SType = "Return";
                                        }
                                        else if (@IBooking.ServiceType == 3)
                                        {
                                            SType = "Sale Visit";
                                        }

                                        <tr>
                                            <td width="10%">
                                                @IBooking.BookingID
                                            </td>
                                            <td width="10%">
                                                @IBooking.Date.ToString("dd/MM/yyyy")
                                            </td>
                                            <td width="10%">
                                                @SType
                                            </td>
                                            @if (IBooking.ServiceType == 3)
                                            {
                                                <td width="40%">@IBooking.RouteDetail</td>
                                            }
                                            else
                                            {
                                                <td>@IBooking.FromDetail &nbsp; to &nbsp; @IBooking.ToDetail</td>
                                            }
                                            <td width="20%">@IBooking.Title @IBooking.FirstName &nbsp; @IBooking.LastName</td>
                                            <td width="10%" align="right">@IBooking.TotalPrice.ToString("#,###.##") &nbsp; @IBooking.Currency</td>

                                        </tr>

                                    }

                                </table>
                                <hr />
                                <table width="100%">
                                    <tr>
                                        <td width="100%" align="right">
                                            <br />

                                            <b>รวมเงินสุทธิ / Grand Total : &nbsp; @IInvoice.GrandTotal.ToString("#,###.##")</b>
                                            <br />

                                        </td>

                                    </tr>
                                    <tr>
                                        <td width="100%" align="right">
                                            <br />

                                            <b>กรุณาขำระเงิน : สามารถชำระเงินได้ที่บัญชี Synergi 2016</b>
                                            <br />
                                            <b>เลขที่ 241-3-01402-4 ธนาคารกรุงเทพ</b>
                                        </td>

                                    </tr>

                                </table>
                                <hr />
                            </div>
                            <!-- /.col -->
                        </div>
                        <div class="row no-print">
                            <div class="col-xs-12">
                                <br />
                                <a href="/LMS/InvoicePrint?InvoiceNo=@IInvoice.InvoiceNo" target="_blank" class="btn btn-success pull-right"><i class="fa fa-print"></i> Print Invoice</a>

                            </div>
                        </div>
                        </div>
                    </div>
                </div>
            </div>           
    </section>
    }

    }
